<% content_for :title, 'Reset Password' %>
<% content_for :layout, 'auth' %>

<!-- Modern Auth Layout with Logo -->
<div class="flex h-screen w-full">
  <!-- Left: Logo Section -->
  <div class="hidden lg:flex lg:w-[45%] flex-col items-center justify-center p-12 bg-gradient-to-br from-[#10b981] via-[#059669] to-[#0d9488] relative overflow-hidden">
    <!-- Animated Background Pattern -->
    <div class="absolute inset-0 opacity-10">
      <div class="absolute top-0 left-0 w-full h-full" style="background-image: radial-gradient(circle at 2px 2px, white 1px, transparent 0); background-size: 40px 40px;"></div>
    </div>
    
    <!-- Logo & Brand -->
    <div class="relative z-10 flex flex-col items-center gap-8">
      <!-- Chef Hat Icon with Smiley -->
      <div class="relative">
        <svg class="w-32 h-32" viewBox="0 0 120 120" fill="none">
          <path d="M30 40 Q20 35 20 50 L20 75 Q20 80 25 80 L95 80 Q100 80 100 75 L100 50 Q100 35 90 40 Q85 20 60 20 Q35 20 30 40 Z" 
                stroke="white" stroke-width="4" fill="white" opacity="0.95"/>
          <path d="M60 80 L50 95 L70 95 Z" fill="white" opacity="0.95"/>
          <circle cx="45" cy="55" r="3" fill="#10b981"/>
          <circle cx="75" cy="55" r="3" fill="#10b981"/>
          <path d="M45 65 Q60 75 75 65" stroke="#10b981" stroke-width="3" stroke-linecap="round" fill="none"/>
        </svg>
      </div>
      
      <!-- Brand Name -->
      <div class="flex flex-col items-center gap-3">
        <h1 class="text-6xl font-black text-white tracking-tight">Recipy</h1>
        <p class="text-xl text-white/90 text-center max-w-md leading-relaxed">
          Reset your password securely
        </p>
      </div>
      
      <!-- Security Badge -->
      <div class="mt-8 px-6 py-3 bg-white/20 backdrop-blur-sm rounded-full text-white text-sm font-medium flex items-center gap-2">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
        </svg>
        Secure & Private
      </div>
    </div>
  </div>

  <!-- Right: Form Panel -->
  <div class="flex flex-1 flex-col items-center justify-center gap-8 px-8 py-12 lg:px-16 bg-white dark:bg-[#1f1f1f]">
    <div class="w-full max-w-md">
      <div class="flex w-full flex-col items-center justify-center gap-3 mb-8">
        <!-- Mobile Logo -->
        <div class="lg:hidden mb-4">
          <svg class="w-16 h-16" viewBox="0 0 120 120" fill="none">
            <path d="M30 40 Q20 35 20 50 L20 75 Q20 80 25 80 L95 80 Q100 80 100 75 L100 50 Q100 35 90 40 Q85 20 60 20 Q35 20 30 40 Z" 
                  stroke="#10b981" stroke-width="4" fill="#10b981" opacity="0.95"/>
            <path d="M60 80 L50 95 L70 95 Z" fill="#10b981" opacity="0.95"/>
            <circle cx="45" cy="55" r="3" fill="white"/>
            <circle cx="75" cy="55" r="3" fill="white"/>
            <path d="M45 65 Q60 75 75 65" stroke="white" stroke-width="3" stroke-linecap="round" fill="none"/>
          </svg>
        </div>
        <h2 class="text-3xl font-black text-gray-900 dark:text-gray-100">Forgot password?</h2>
        <p class="text-sm text-gray-600 dark:text-gray-400 text-center">No worries, we'll send you a reset link</p>
      </div>

      <% if resource.errors.any? %>
        <div class="w-full p-3 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 text-red-800 dark:text-red-200 text-sm rounded-xl">
          <%= resource.errors.full_messages.first %>
        </div>
      <% end %>
      <% if notice %>
        <div class="w-full p-3 bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-800 text-green-800 dark:text-green-200 text-sm rounded-xl"><%= notice %></div>
      <% end %>
      <% if alert %>
        <div class="w-full p-3 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 text-red-800 dark:text-red-200 text-sm rounded-xl"><%= alert %></div>
      <% end %>

      <div class="flex w-full flex-col items-start justify-center gap-6">
      <!-- Form -->
      <%= form_for(resource, as: resource_name, url: password_path(resource_name), html: { method: :post, class: "w-full space-y-5", data: { turbo: false } }) do |f| %>
        <div>
          <label class="block text-sm font-semibold mb-2 text-gray-900 dark:text-gray-100">Email</label>
          <%= f.email_field :email, autofocus: true, autocomplete: "email", required: true, placeholder: "Enter your email", class: "w-full px-4 py-3 bg-white dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary text-sm transition-all placeholder-gray-400 dark:placeholder-gray-500" %>
        </div>

        <%= f.submit "Send reset link", class: "h-12 w-full bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 hover:shadow-xl text-white font-bold rounded-xl transition-all hover:scale-[1.02] active:scale-[0.98] cursor-pointer" %>

        <div class="flex w-full items-center justify-center gap-1.5 pt-2">
          <span class="text-sm text-gray-600 dark:text-gray-400">Remember your password?</span>
          <%= link_to "Sign in", new_user_session_path, class: "text-sm font-bold text-emerald-600 dark:text-emerald-400 hover:text-emerald-700 dark:hover:text-emerald-300 transition-colors" %>
        </div>
      <% end %>
      </div>
    </div>
  </div>
</div>
