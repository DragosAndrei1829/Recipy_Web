<% content_for :title, "Creează challenge" %>

<div class="challenge-form-page">
  <div class="challenge-form-container">
    <div class="flex items-center justify-between mb-6">
      <h1 class="text-2xl font-black text-primary-content">Creează challenge</h1>
      <%= link_to challenges_path, class: "btn-icon" do %>
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
        </svg>
      <% end %>
    </div>

    <div class="challenge-eligibility-info mb-6">
      <div class="flex items-start gap-3 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg">
        <svg class="w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        <div>
          <p class="text-sm font-semibold text-blue-900 dark:text-blue-100 mb-1">Cerințe pentru crearea challenge-urilor:</p>
          <ul class="text-sm text-blue-800 dark:text-blue-200 list-disc list-inside space-y-1">
            <li>Cel puțin <strong><%= Challenge::MIN_LIKES_TO_CREATE %></strong> like-uri totale pe toate rețetele tale</li>
            <li>Medie de rating de cel puțin <strong><%= Challenge::MIN_AVG_RATING_TO_CREATE %>/10</strong> pentru rețetele tale</li>
          </ul>
        </div>
      </div>
    </div>

    <%= form_with model: @challenge, local: true, class: "space-y-6" do |f| %>
      <% if @challenge.errors.any? %>
        <div class="alert-error">
          <ul>
            <% @challenge.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <div class="form-field">
        <%= f.label :title, "Titlu challenge", class: "form-label" %>
        <%= f.text_field :title, class: "form-input", placeholder: "Ex: Cel mai bun desert de iarnă", required: true %>
      </div>

      <div class="form-field">
        <%= f.label :description, "Descriere", class: "form-label" %>
        <%= f.text_area :description, rows: 5, class: "form-textarea", placeholder: "Descrie challenge-ul, ce trebuie să facă participanții..." %>
      </div>

      <div class="form-field">
        <%= f.label :challenge_type, "Tip challenge", class: "form-label" %>
        <%= f.select :challenge_type,
            options_for_select([
              ['Rețetă', 'recipe'],
              ['Tehnică de gătit', 'cooking_technique'],
              ['Ingredient', 'ingredient'],
              ['Temă', 'theme'],
              ['Sezonier', 'seasonal']
            ], @challenge.challenge_type),
            {},
            { class: "form-select" } %>
      </div>

      <div class="grid grid-cols-2 gap-4">
        <div class="form-field">
          <%= f.label :start_date, "Data început", class: "form-label" %>
          <%= f.date_field :start_date, class: "form-input", required: true %>
        </div>

        <div class="form-field">
          <%= f.label :end_date, "Data sfârșit", class: "form-label" %>
          <%= f.date_field :end_date, class: "form-input", required: true %>
        </div>
      </div>

      <div class="form-field">
        <%= f.label :rules, "Reguli (opțional)", class: "form-label" %>
        <%= f.text_area :rules, rows: 4, class: "form-textarea", placeholder: "Specifică regulile challenge-ului..." %>
      </div>

      <div class="form-field">
        <%= f.label :prize, "Premiu (opțional)", class: "form-label" %>
        <%= f.text_field :prize, class: "form-input", placeholder: "Ex: Badge special, 100 RON, etc." %>
      </div>

      <div class="flex gap-3">
        <%= f.submit "Creează challenge", class: "btn-primary" %>
        <%= link_to "Anulează", challenges_path, class: "btn-secondary" %>
      </div>
    <% end %>
  </div>
</div>
