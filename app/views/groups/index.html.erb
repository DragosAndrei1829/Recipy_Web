<% content_for :title, "Grupurile Mele" %>

<div class="max-w-6xl mx-auto px-4 py-8">
  <!-- Header -->
  <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8">
    <div>
      <h1 class="text-3xl font-bold text-primary-content">Grupurile Mele</h1>
      <p class="text-secondary-content mt-1">CreeazÄƒ È™i gestioneazÄƒ grupuri private pentru reÈ›ete</p>
    </div>
    
    <div class="flex gap-3">
      <!-- Join Group -->
      <button type="button" onclick="document.getElementById('join-modal').classList.remove('hidden')" class="px-4 py-2 bg-card border border-default rounded-xl hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors text-gray-700 dark:text-gray-300">
        <svg class="w-5 h-5 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"/>
        </svg>
        AlÄƒturÄƒ-te
      </button>
      
      <!-- Create Group -->
      <%= link_to new_group_path, class: "px-4 py-2 bg-gradient-to-r from-emerald-600 to-teal-500 text-white rounded-xl hover:from-emerald-700 hover:to-teal-600 transition-all shadow-lg" do %>
        <svg class="w-5 h-5 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
        </svg>
        CreeazÄƒ Grup
      <% end %>
    </div>
  </div>

  <% if @my_groups.empty? && @owned_groups.empty? %>
    <!-- Empty State -->
    <div class="text-center py-16 bg-card rounded-2xl border border-default">
      <div class="w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-emerald-100 to-teal-100 dark:from-emerald-900/30 dark:to-teal-900/30 rounded-full flex items-center justify-center">
        <span class="text-5xl">ğŸ‘¥</span>
      </div>
      <h2 class="text-xl font-semibold text-primary-content mb-2">Nu faci parte din niciun grup</h2>
      <p class="text-secondary-content max-w-md mx-auto mb-6">
        CreeazÄƒ un grup privat pentru a partaja reÈ›ete cu prietenii sau familia, sau alÄƒturÄƒ-te unui grup existent cu un cod de invitaÈ›ie.
      </p>
      <div class="flex justify-center gap-3">
        <button type="button" onclick="document.getElementById('join-modal').classList.remove('hidden')" class="px-4 py-2 bg-card border border-default rounded-xl hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors text-gray-700 dark:text-gray-300">
          Am un cod de invitaÈ›ie
        </button>
        <%= link_to "CreeazÄƒ primul grup", new_group_path, class: "px-4 py-2 bg-gradient-to-r from-emerald-600 to-teal-500 text-white rounded-xl hover:from-emerald-700 hover:to-teal-600 transition-all" %>
      </div>
    </div>
  <% else %>
    <!-- Groups Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <% @my_groups.each do |group| %>
        <%= render "groups/group_card", group: group %>
      <% end %>
    </div>
  <% end %>
</div>

<!-- Join Modal -->
<div id="join-modal" class="hidden fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4">
  <div class="bg-card rounded-2xl p-6 max-w-md w-full shadow-2xl">
    <h3 class="text-xl font-bold text-primary-content mb-4">AlÄƒturÄƒ-te unui grup</h3>
    <p class="text-secondary-content mb-4">Introdu codul de invitaÈ›ie primit de la owner-ul grupului.</p>
    
    <%= form_with url: join_groups_path, method: :post, local: true do |f| %>
      <div class="mb-4">
        <%= f.text_field :invite_code, placeholder: "Ex: ABC12345", class: "w-full px-4 py-3 border border-default rounded-xl bg-card text-primary-content uppercase tracking-widest text-center text-lg font-mono", maxlength: 8 %>
      </div>
      
      <div class="flex gap-3">
        <button type="button" onclick="document.getElementById('join-modal').classList.add('hidden')" class="flex-1 px-4 py-2 bg-gray-100 bg-card text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
          AnuleazÄƒ
        </button>
        <%= f.submit "AlÄƒturÄƒ-te", class: "flex-1 px-4 py-2 bg-gradient-to-r from-emerald-600 to-teal-500 text-white rounded-xl hover:from-emerald-700 hover:to-teal-600 transition-all cursor-pointer" %>
      </div>
    <% end %>
  </div>
</div>

<script>
  // Close modal on click outside
  document.getElementById('join-modal').addEventListener('click', function(e) {
    if (e.target === this) {
      this.classList.add('hidden');
    }
  });
</script>

