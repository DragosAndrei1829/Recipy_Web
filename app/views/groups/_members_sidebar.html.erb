<div class="group-sidebar-card">
  <div class="group-sidebar-header">
    <h3 class="group-sidebar-title">Membri</h3>
    <span class="group-sidebar-badge"><%= group.members_count %></span>
  </div>
  
  <div class="group-members-list">
    <% group.members.limit(20).each do |member| %>
      <% membership = group.group_memberships.find_by(user: member) %>
      <div class="group-member-item">
        <div class="flex items-center gap-3">
          <% if member.avatar.attached? && member.avatar.blob.present? %>
            <%= image_tag url_for(member.avatar.variant(resize_to_fill: [40, 40])), class: "group-member-avatar" %>
          <% else %>
            <div class="group-member-avatar group-member-avatar-placeholder">
              <%= member.username&.first&.upcase || "?" %>
            </div>
          <% end %>
          
          <div class="flex-1 min-w-0">
            <%= link_to user_path(member), class: "group-member-name" do %>
              <%= member.username %>
            <% end %>
            <div class="group-member-role">
              <% if member == group.owner %>
                <span class="group-role-badge group-role-owner">ðŸ‘‘ Owner</span>
              <% elsif membership&.role == 'admin' %>
                <span class="group-role-badge group-role-admin">Admin</span>
              <% elsif membership&.role == 'moderator' %>
                <span class="group-role-badge group-role-moderator">Moderator</span>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    <% end %>
    
    <% if group.members_count > 20 %>
      <%= link_to members_group_path(group), class: "group-sidebar-more-link" do %>
        Vezi toÈ›i membrii (<%= group.members_count %>)
      <% end %>
    <% end %>
  </div>
  
  <!-- Invite Code -->
  <div class="group-invite-code">
    <div class="group-invite-label">Cod invitaÈ›ie</div>
    <div class="group-invite-value">
      <code class="group-invite-code-text"><%= group.invite_code %></code>
      <button type="button" onclick="navigator.clipboard.writeText('<%= group.invite_code %>')" class="group-invite-copy" title="CopiazÄƒ">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
        </svg>
      </button>
    </div>
  </div>
</div>

